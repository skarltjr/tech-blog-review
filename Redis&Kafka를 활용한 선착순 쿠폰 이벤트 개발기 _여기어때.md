- https://techblog.gccompany.co.kr/redis-kafka를-활용한-선착순-쿠폰-이벤트-개발기-feat-네고왕-ec6682e39731


### 1. 문제
```
1. 기존 쿠폰 시스템은 RDB에 의존하여 수량 체크가 이루어진다.
- 동시성 이슈로 쿠폰 초과 지급 가능성 존재

2. 모놀리식 구조
- 쿠폰 시스템의 장애 -> 여기어때 서비스 전체에 장애 전파 가능성
```
```
내 생각
1. 
- 예를들어 mysql - rdb를 사용한다면 트랜잭션 격리 수준2로 보완할 수 있지않을까?
- 그러나 격리수준 2레벨이면서 & b+tree에서 데이터 조회는 성능 측면에서 키-값 구조의 redis보다 훨씬 느릴것이라고 생각
- 만약 조회에서 인덱스를 사용한다고해도 지금 여기서는 쿠폰 발급 카운트를 ++해야하는데 그럼 수정이 엄청 빈번함

2. 
쿠폰 개수 카운트 시스템
쿠폰 발급 시스템으로 분리하는게 좋을 것 같다.
그리고 서비스간 동기 통신을 피해 서비스간 의존성을 끊어내야한다고 생각
```

### 2. 쿠폰 발급 이벤트 요구사항
```
- 정해진 지급 수량을 초과하면 안된다
- 쿠폰은 1인 1장⭐️
```

