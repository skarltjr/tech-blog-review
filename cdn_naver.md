```
content delivery network

우리가 유튜브 본사에 매번 데이터 요청하면 
미국까지 왔다갔다 속도가 굉장히 느릴것
지역적인 저장소를 구축하여 보다 빠르게 
데이터를 전달받는다.
```

### cdn 콘텐츠
- 정적 컨텐츠
```
한 번 만들어진 후 변경되거나 수정되지 않고 사용자에게 전달되는 컨텐츠
```
- 동적 컨텐츠
```
사용자 요청에 따라 가공이 필요한 컨텐츠
```
- 가장 좋은 방법은 동적 컨텐츠는 was를 활용하고 / 정적 컨텐츠는 cdn을 활용

### cdn의 핵심 : 캐싱 로직과 유효성 검증
```
캐시(Cache)란 용어는 CDN 외에도 서버의 하드웨어와 같이 범용적으로 사용되는 단어인데요. 
하드웨어 혹은 소프트웨어에 데이터를 저장하여 추후 요청의 데이터를 더 빠르게 제공하는 기술 용어입니다. 
CDN에서는 사용자가 요청하는 데이터를 빠르게 제공하기 위해 콘텐츠를 캐싱하는 캐시 서버를 활용합니다
```
- hit & miss 
```
hit : 
캐시 서버에 데이터가 존재하여 바로 컨텐츠를 제공할 수 있다
이 경우 원본 서버를 향하지 않기에 원본 서버 요청 과부하를 줄이고 빠른 속도로 데이터 제공 가능

miss :
캐시 서버에 데이터가 없어 원본 서버로부터 데이터를 받아와야한다.
```

- 캐시 유효성 검증
```
cache refresh hit :
캐시 서버에 저장된 컨텐츠가 만료되어 원본 서버로부터 유효성 검증을 필요로한다
이 경우는 원본 서버 데이터가 수정되지 않은 상태이고
따라서 캐시 서버에 저장된 컨텐츠를 수정하지 않고 cache ttl을 갱신한다

cache refresh miss :
마찬가지로 캐시 서버에 저장된 컨텐츠는 만료,
이 경우는 원본 서버 데이터가 수정된 상태이고
따라서 캐시 서버에 저장된 컨텐츠를 변경된 컨텐츠로 갱신한다.
```

### 컨텐츠 교체시 고려사항!
```
cdn 캐싱의 기준은 서비스 url이기에 파일명이 변경되지 않고!!!
파일만 교체되는 경우, 캐시 서버에서는 구 파일 내용의 유효하지 않은 파일을 전송할 수 있다.

즉 동일한 파일명을 사용하여 cdn의 컨텐츠를 갱신하고 싶다면 purge를 활용한다
purge : 캐시 서버에 캐싱된 컨텐츠를 강제 삭제하여 원본 서버로부터 갱신된 컨텐츠를 가져온다

하지만 당연하게도 캐시서버의 컨텐츠를 삭제하여 원본 서버로 요청을 만드는거니까
원본 서버에 요청이 증가하여 부하가 추가된다
추가로 purge는 캐시 서버의 컨텐츠 갱신이므로 사용자단의 local cache된 컨텐츠 갱신을 
보장할 수 없다.

되도록 사용자단까지의 파일의 최신성 보장을 위해 파일명과 url을 변경하여 새롭게
캐싱하는것이 좋다.
```


- https://medium.com/naver-cloud-platform/더-빠른-콘텐츠-전송을-위한-cdn-활용-팁-91f488f202d8
